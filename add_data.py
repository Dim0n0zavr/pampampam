import sqlite3
import database

def add_product(name, calories, proteins, fats, carbs):
    conn = sqlite3.connect('nutrition.db')
    c = conn.cursor()
    c.execute('''INSERT INTO products (name, calories, proteins, fats, carbs)
                 VALUES (?, ?, ?, ?, ?)''', 
              (name, calories, proteins, fats, carbs))
    conn.commit()
    conn.close()

def add_dish(name, category, composition):
    conn = sqlite3.connect('nutrition.db')
    c = conn.cursor()
    
    # Добавляем блюдо
    c.execute('''INSERT INTO dishes (name, category) VALUES (?, ?)''', (name, category))
    dish_id = c.lastrowid
    
    # Добавляем состав
    for product_name, grams in composition:
        c.execute("SELECT id FROM products WHERE name = ?", (product_name,))
        product_id = c.fetchone()[0]
        c.execute('''INSERT INTO dish_composition (dish_id, product_id, grams)
                     VALUES (?, ?, ?)''', (dish_id, product_id, grams))
    
    conn.commit()
    conn.close()

# Пример использования
if __name__ == "__main__":

    database.create_database()   

    # Добавляем 30 продуктов
    products = [
        ("Яйцо куриное", 155, 12.7, 10.9, 0.7),
        ("Овсяные хлопья", 389, 13.1, 6.2, 66.3),
        ("Молоко 2.5%", 52, 2.8, 2.5, 4.7),
        ("Куриная грудка", 165, 31.0, 3.6, 0.0),
        ("Рис белый", 365, 7.1, 0.7, 79.0),
        ("Гречневая крупа", 343, 13.2, 3.4, 71.5),
        ("Картофель", 77, 2.0, 0.1, 17.0),
        ("Лосось", 208, 20.0, 13.0, 0.0),
        ("Брокколи", 34, 2.8, 0.4, 6.6),
        ("Авокадо", 160, 2.0, 15.0, 9.0),
        ("Хлеб цельнозерновой", 247, 13.0, 3.4, 41.0),
        ("Сыр чеддер", 402, 25.0, 33.0, 1.3),
        ("Творог 5%", 121, 17.0, 5.0, 3.0),
        ("Яблоко", 52, 0.3, 0.2, 14.0),
        ("Бананы", 89, 1.1, 0.3, 23.0),
        ("Масло оливковое", 884, 0.0, 100.0, 0.0),
        ("Мед", 304, 0.3, 0.0, 82.0),
        ("Кукуруза консервированная", 86, 2.7, 1.2, 19.0),
        ("Фасоль консервированная", 94, 6.0, 0.5, 17.0),
        ("Томаты", 18, 0.9, 0.2, 3.9),
        ("Огурцы", 16, 0.7, 0.1, 3.6),
        ("Шпинат", 23, 2.9, 0.4, 3.6),
        ("Греческий йогурт", 59, 10.0, 0.4, 3.6),
        ("Свинина", 242, 27.0, 14.0, 0.0),
        ("Говядина", 250, 26.0, 15.0, 0.0),
        ("Тунец консервированный", 132, 29.0, 1.0, 0.0),
        ("Спагетти", 371, 13.0, 1.5, 75.0),
        ("Сметана 15%", 162, 2.8, 15.0, 3.2),
        ("Кефир 2.5%", 53, 3.4, 2.5, 4.0),
        ("Морковь", 41, 0.9, 0.2, 9.6),
    ]
    
    for product in products:
        add_product(*product)
    
    # Добавляем 10 блюд
    dishes = [
        ("Овсянка с яйцом", "Завтрак", [("Овсяные хлопья", 100), ("Яйцо куриное", 50)]),
        ("Гречневая каша с курицей", "Обед", [("Гречневая крупа", 150), ("Куриная грудка", 100)]),
        ("Салат из брокколи и авокадо", "Ужин", [("Брокколи", 100), ("Авокадо", 50), ("Масло оливковое", 10)]),
        ("Рис с лососем", "Обед", [("Рис белый", 150), ("Лосось", 100)]),
        ("Творог с медом", "Завтрак", [("Творог 5%", 150), ("Мед", 20)]),
        ("Картофельное пюре с котлетой", "Обед", [("Картофель", 200), ("Свинина", 100), ("Молоко 2.5%", 50)]),
        ("Спагетти с тунцом", "Ужин", [("Спагетти", 150), ("Тунец консервированный", 100), ("Томаты", 50)]),
        ("Омлет с овощами", "Завтрак", [("Яйцо куриное", 100), ("Томаты", 50), ("Шпинат", 50)]),
        ("Суп с фасолью", "Обед", [("Фасоль консервированная", 150), ("Картофель", 100), ("Морковь", 50)]),
        ("Фруктовый салат", "Ужин", [("Яблоко", 100), ("Бананы", 100), ("Греческий йогурт", 50)]),
    ]
    
    for dish in dishes:
        add_dish(*dish)